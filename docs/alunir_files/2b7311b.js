(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{402:function(t,e,o){var content=o(404);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(35).default)("8ac07d78",content,!0,{sourceMap:!1})},403:function(t,e,o){"use strict";o(402)},404:function(t,e,o){var n=o(34)(!1);n.push([t.i,".loading[data-v-0e69f39b]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#fff;z-index:1000;display:flex;align-items:center;align-content:center;justify-content:center;perspective:300px;transition:none}.icon[data-v-0e69f39b]{width:14px;height:140px;position:relative;transition:.6s cubic-bezier(.4,.4,0,1);transform:rotate(45deg)}.back[data-v-0e69f39b]{top:0;background:#f1f1f1}.back[data-v-0e69f39b],.progress[data-v-0e69f39b]{position:absolute;left:0;width:14px;height:140px;border-radius:3px}.progress[data-v-0e69f39b]{bottom:0;background:linear-gradient(0deg,#f05,#f94cff) bottom;clip:rect(10px,14px,140px,0)}.loading-enter .progress[data-v-0e69f39b]{clip:rect(140px,14px,140px,0)}.loading-enter-active .progress[data-v-0e69f39b]{transition:5s cubic-bezier(.31,.13,0,1)}.loading-leave-active[data-v-0e69f39b],.loading-leave-active .icon[data-v-0e69f39b]{transition:.8s cubic-bezier(.4,.4,0,1) .1s}.loading-leave-active .progress[data-v-0e69f39b]{transition:.6s cubic-bezier(.4,.4,0,1)}.loading-leave-to[data-v-0e69f39b]{background-color:hsla(0,0%,100%,0)}.loading-leave-to .icon[data-v-0e69f39b]{transform:scale(2) rotate(45deg);opacity:0}.loading-leave-to .progress[data-v-0e69f39b]{clip:rect(0,16px,160px,0)}",""]),t.exports=n},405:function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var n=o(96),r=o(8),c=o(147),d=o(26);function l(t,e,o){const{page:l,params:h}=t;if(d.a.isAPIRequestPage(l))Object(n.a)(l.apiRequest,e.resources.apiList||[],{$route:{params:h}}).then(o);else if(d.a.isCmsRequestPage(l)){const t={params:h},e=Object(r.a)(l.cmsRequest.contentSlug,{$route:t}),n=l.cmsRequest.schemaKey;c.a.findCmsContents((t=>{o(t[0])}),{path:{schemaKey:n,contentSlug:e}},!1)}}},406:function(t,e,o){"use strict";var n=o(1).default.extend({name:"Loading"}),r=(o(403),o(12)),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"loading",appear:""}},[o("div",{staticClass:"loading"},[o("div",{staticClass:"icon"},[o("div",{staticClass:"back"}),t._v(" "),o("div",{staticClass:"progress"})])])])}),[],!1,null,"0e69f39b",null);e.a=component.exports},408:function(t,e,o){var content=o(414);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(35).default)("50518278",content,!0,{sourceMap:!1})},413:function(t,e,o){"use strict";o(408)},414:function(t,e,o){var n=o(34)(!1);n.push([t.i,".container[data-v-0a168000]{transition:none}.container.page-enter[data-v-0a168000],.container.page-leave-to[data-v-0a168000]{opacity:0}.container.page-enter-active[data-v-0a168000],.container.page-leave-active[data-v-0a168000]{transition:.3s cubic-bezier(.4,.4,0,1)}",""]),t.exports=n},421:function(t,e,o){"use strict";o.r(e);var n=o(1),r=o(93),c=o(145),d=o(406),l=o(146),h=o(21),v=o(84),f=o(205),m=o(206),y=o(405),j=o(26);var x=n.default.extend({components:{RenderCanvas:c.a,Loading:d.a,FormMessage:l.a},data:()=>({isLoading:!1,dynamicContent:null,unsubscribe:null,isSlugNotFound:!1}),computed:{basePath(){return"/live/".concat(this.$route.params.previewId)},isConnected(){return this.$store.getters["product/isLoaded"]},project(){return this.$store.getters["project/project"]},product(){return this.$store.getters["product/product"]},selectedRoute(){const t=this.product;return this.isSlugNotFound&&!j.a.checkIgnoreDynamicPage404Path(this.$route.params.pageId)?{page:this.$store.getters["product/get404Page"],params:void 0}:t&&Object(h.b)(t.pages,this.$route.params.pageId)},params(){return this.selectedRoute&&this.selectedRoute.params},rssMap(){return this.$store.getters["product/rssMap"]}},watch:{"$route.params":{handler(){this.updateDynamicContent()},deep:!0,immediate:!0}},async mounted(){if(!this.isConnected)try{this.isLoading=!0;const{token:t,preview:e}=(await r.a.getToken(this.$route.params.previewId)).data,o=(t=>{const{project_name:e,project_type:o,custom_domain:n,project_display_badge:r,recaptcha_site_key:c,project_id:d}=t;return{name:e,type:o,customDomain:n,displayBadge:r,recaptchaSiteKey:c,id:d,integrations:[]}})(e);this.$store.commit("project/setProject",{project:o}),await Object(f.a)().signIn(t),Object(m.a)().subscribe(o.id,(async t=>{var e;await this.$store.dispatch("product/setProduct",{product:{fonts:[],colors:[],breakPoints:[],...Object(v.b)(t)}});const o=null===(e=null==t?void 0:t.resources)||void 0===e?void 0:e.cmsProjectId;o&&!this.$store.state.CmsStore.initialized?(this.$store.watch((t=>t.CmsStore.initialized),((t,e)=>{t&&!e&&(this.isLoading=!1,this.updateDynamicContent())})),this.$store.dispatch("CmsStore/init",{isTemplate:!1})):o||(this.isLoading=!1,await this.updateDynamicContent())}))}catch(t){console.error(t)}},beforeDestroy(){this.unsubscribe&&this.unsubscribe()},methods:{updateDynamicContent(){this.selectedRoute&&Object(y.a)(this.selectedRoute,this.product,(content=>{this.dynamicContent=content,this.isSlugNotFound=!content}))}},head(){if(!this.selectedRoute)return{};const t=this.selectedRoute.page,e=this.project,o=this.product;return Object(h.c)({project:e,product:o,selectedPage:t,isPreview:!0,data:this.dynamicContent})}}),C=(o(413),o(12)),component=Object(C.a)(x,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("client-only",[o("div",{staticClass:"container"},[t.selectedRoute&&!t.isLoading?[o("FormMessage"),t._v(" "),o("RenderCanvas",{attrs:{isPreview:!0,basePath:t.basePath,selectedRoute:t.selectedRoute,displayBadge:t.project.displayBadge,rssMap:t.rssMap,dynamicContent:t.dynamicContent}})]:t._e(),t._v(" "),t.isLoading?o("Loading"):t._e()],2)])}),[],!1,null,"0a168000",null);e.default=component.exports}}]);